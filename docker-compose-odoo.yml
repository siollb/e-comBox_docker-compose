version: "2"
services:
  db:
    image: postgres:10
    container_name : odoo-db-${SUFFIXE}
    restart: always
    environment:
      POSTGRES_DB: postgres
      POSTGRES_PASSWORD: mdpOdoo
      POSTGRES_USER: userOdoo
      PGDATA: /var/lib/postgresql/data/pgdata
    volumes:
      - db_data_odoo:/var/lib/postgresql/data

  odoo:
    image: odoo:12.0
    container_name : odoo-${SUFFIXE}
    restart: always
    links :
      - db
    ports:
      - 9500-9599:8069
    volumes:
      - odoo_data:/var/lib/odoo
      - odoo_config:/etc/odoo
      - odoo_addons:/mnt/extra-addons
    depends_on:
      - db
    environment:
      HOST: db
      PORT: 5432
      USER: userOdoo
      PASSWORD: mdpOdoo

volumes:
  db_data_odoo: {}
  odoo_data: {}
  odoo_config: {}
  odoo_addons: {}
